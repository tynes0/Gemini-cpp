\doxysection{chat\+\_\+session.\+h}
\hypertarget{chat__session_8h_source}{}\label{chat__session_8h_source}\index{gemini/chat\_session.h@{gemini/chat\_session.h}}
\mbox{\hyperlink{chat__session_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#ifndef\ GEMINI\_CHAT\_SESSION\_H}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#define\ GEMINI\_CHAT\_SESSION\_H}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <future>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{generation__method_8h}{generation\_method.h}}"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{response_8h}{response.h}}"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{function__registry_8h}{function\_registry.h}}"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{support_8h}{support.h}}"{}}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_gemini_c_p_p}{GeminiCPP}}}
\DoxyCodeLine{00017\ \{}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{class\ }Client;\ }
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae156ca80bd631c32b69e4f62eeb60cb8}{ChatSession}}\ }
\DoxyCodeLine{00027\ \ \ \ \ \{}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae156ca80bd631c32b69e4f62eeb60cb8}{ChatSession}}(\mbox{\hyperlink{class_gemini_c_p_p_1_1_client}{Client}}*\ client,\ std::string\_view\ model,\ std::string\ sessionName\ =\ \textcolor{stringliteral}{"{}"{}},\ std::string\ sessionId\ =\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a34b57f3455146ccafdce22cb3daca943}{ChatSession}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae156ca80bd631c32b69e4f62eeb60cb8}{ChatSession}}\&\ other);}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae156ca80bd631c32b69e4f62eeb60cb8}{ChatSession}}\&\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a93ee76d0a66bd41c8a4a396b828d44c8}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae156ca80bd631c32b69e4f62eeb60cb8}{ChatSession}}\&\ other);}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a8311cc011ddfd5906c4adc9621d9525d}{\string~ChatSession}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_result}{GenerationResult}}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a577cffef62b2aa60c9f5107a8855f6f3}{send}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_content}{Content}}\&\ content);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_result}{GenerationResult}}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ac506f6051f9bd29cc93331690d653643}{send}}(\textcolor{keyword}{const}\ std::string\&\ text);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_result}{GenerationResult}}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a2e918065cd13c3ab2ee36ea9c8393c90}{stream}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_content}{Content}}\&\ content,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_gemini_c_p_p_a299d3ceda8e3174a4e47607e0d9fc920}{StreamCallback}}\&\ callback);}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_result}{GenerationResult}}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ad8130aa710b24be69aa4b3a3f98026a9}{stream}}(\textcolor{keyword}{const}\ std::string\&\ text,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_gemini_c_p_p_a299d3ceda8e3174a4e47607e0d9fc920}{StreamCallback}}\&\ callback);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Async\ versions}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::future<GenerationResult>\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a1571bac08b8e68a6e51909982cf41ef2}{sendAsync}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_content}{Content}}\&\ content);}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::future<GenerationResult>\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a038e3a410dcf20db82f222553db64e42}{sendAsync}}(\textcolor{keyword}{const}\ std::string\&\ text);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::future<GenerationResult>\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a570c6fa319c931d0485019284208eca1}{streamAsync}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_content}{Content}}\&\ content,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_gemini_c_p_p_a299d3ceda8e3174a4e47607e0d9fc920}{StreamCallback}}\&\ callback);}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::future<GenerationResult>\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae2f97b90ccc1fecae4a65b634b45b9eb}{streamAsync}}(\textcolor{keyword}{const}\ std::string\&\ text,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_gemini_c_p_p_a299d3ceda8e3174a4e47607e0d9fc920}{StreamCallback}}\&\ callback);}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::string\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a1feb53a7fc3d4b4567ff2840a7adf50b}{getId}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a6ace56350f1f4acef4f7aae897a85663}{setModel}}(std::string\_view\ model);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::string\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a3c67b3273006cceac761717b0972a8e9}{getModel}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a61f7cd8af56c8dd1c098c867d6c830b4}{setSystemInstruction}}(std::string\ systemInstruction);}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::string\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a23e9379d4c0c8fc5fa2dbc9919f0cea9}{getSystemInstruction}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a70fd11775b1bd10209dcf296cbaee81d}{setSessionName}}(std::string\ sessionName);}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::string\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae4b5d03a57110c0d7547932564e4327a}{getSessionName}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a3766a780dfa083d2d01f4add5c3c55c9}{setCachedContent}}(std::string\ cacheName);}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::string\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_afc96299bbd993387b0a0643a4b23625b}{getCachedContent}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a754d68d7b304df863d63f18171e7e915}{setConfig}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_config}{GenerationConfig}}\&\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ab2f89613921150a696c10a70a26a0d51}{config}});}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_config}{GenerationConfig}}\&\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ab2f89613921150a696c10a70a26a0d51}{config}}();}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tool\ Management}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a61172bc512daef466208ff76f1118e77}{addTool}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_tool}{Tool}}\&\ tool);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a03b481d4436924b0bf48b29c36d706dd}{setTools}}(\textcolor{keyword}{const}\ std::vector<Tool>\&\ tools);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a00d8a2dbcedfd00520689e1ce7c71905}{clearTools}}();}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Safety\ Settings}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a352a535237ba72b87dd0cfcd3f649584}{setSafetySettings}}(\textcolor{keyword}{const}\ std::vector<SafetySetting>\&\ settings);}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a21221b5ad83865ce34bb93c9b3ae22ed}{addSafetySetting}}(\mbox{\hyperlink{namespace_gemini_c_p_p_a1f59a22bd8c42ca01cd92776458d027d}{HarmCategory}}\ category,\ HarmBlockThreshold\ threshold);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a995086452f895112181ddf36489ebfdb}{clearSafetySettings}}();}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_aa1c9582ccf1737583fc1fdbc542a67c3}{registerFunction}}(\textcolor{keyword}{const}\ std::string\&\ name,\ Func\&\&\ func,\ \textcolor{keyword}{const}\ std::string\&\ doc,\ \textcolor{keyword}{const}\ std::vector<std::string>\&\ argNames)}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lock(mutex\_);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ functionRegistry\_.registerFunction(name,\ std::forward<Func>(func),\ doc,\ argNames);}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ab294257736b8cc9f72c6bd5f682f21c5}{setAutoReply}}(\textcolor{keywordtype}{bool}\ enabled);}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a3e18865796719c8565739ec9b5b33cb4}{setMaxFunctionCallTurns}}(\textcolor{keywordtype}{int}\ maxTurns);}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ab7b41b834642cef56fdc86a780b4f83f}{getMaxFunctionCallTurns}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_aee365337bc6adbb0f392ba4b30de7224}{clearHistory}}();}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::vector<Content>\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a75ad6626629b6cf88af7c0da35119409}{history}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Serialization}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ [[nodiscard]]\ nlohmann::json\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a5e9538720f921dc07f2f18b31a0962fd}{toJson}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_ae156ca80bd631c32b69e4f62eeb60cb8}{ChatSession}}\ \mbox{\hyperlink{class_gemini_c_p_p_1_1_chat_session_a5f2e3c0d760e75f79dcdf05fe1a88f1e}{fromJson}}(\mbox{\hyperlink{class_gemini_c_p_p_1_1_client}{Client}}*\ client,\ \textcolor{keyword}{const}\ nlohmann::json\&\ j);}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_result}{GenerationResult}}\ sendInternal();}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ [[nodiscard]]\ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_result}{GenerationResult}}\ streamInternal(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespace_gemini_c_p_p_a299d3ceda8e3174a4e47607e0d9fc920}{StreamCallback}}\&\ callback);}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ [[nodiscard]]\ std::vector<Tool>\ getCombinedTools()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_gemini_c_p_p_1_1_client}{Client}}*\ client\_;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ std::string\ model\_;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ std::string\ sessionId\_;}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ std::string\ sessionName\_;}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ std::string\ systemInstruction\_;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ std::string\ cachedContent\_;}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ std::vector<Content>\ history\_;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ std::vector<Tool>\ tools\_;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_gemini_c_p_p_1_1_function_registry}{FunctionRegistry}}\ functionRegistry\_;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ autoReply\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ maxFunctionCallTurns\_\ =\ 10;}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_gemini_c_p_p_1_1_generation_config}{GenerationConfig}}\ config\_;}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ std::vector<SafetySetting>\ safetySettings\_;}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ std::mutex\ mutex\_;}
\DoxyCodeLine{00187\ \ \ \ \ \};}
\DoxyCodeLine{00188\ \}}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
